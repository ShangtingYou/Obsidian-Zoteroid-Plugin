/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => LiteraturePlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  literatureRoot: "Literature",
  literatureOverviewPagePath: "Literature Overview.md"
};
function sanitizeForPath(name) {
  return name.replace(/[<>:"\/\\|?*\x00-\x1F]/g, "_").trim();
}
function extractYearFromCrossref(message) {
  var _a, _b, _c, _d, _e, _f;
  try {
    const parts = (_b = (_a = message.issued) == null ? void 0 : _a["date-parts"]) == null ? void 0 : _b[0];
    if (parts && parts.length > 0)
      return String(parts[0]);
  } catch (e) {
  }
  try {
    const parts = ((_d = (_c = message["published-print"]) == null ? void 0 : _c["date-parts"]) == null ? void 0 : _d[0]) || ((_f = (_e = message["published-online"]) == null ? void 0 : _e["date-parts"]) == null ? void 0 : _f[0]);
    if (parts && parts.length > 0)
      return String(parts[0]);
  } catch (e) {
  }
  return "UnknownYear";
}
function stripHtmlTags(html) {
  if (!html)
    return "";
  return html.replace(/<[^>]*>/g, "").trim();
}
var DoiModal = class extends import_obsidian.Modal {
  constructor(app, onSearch) {
    super(app);
    this.onSearch = onSearch;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h3", { text: "Import literature by DOI" });
    const input = contentEl.createEl("input", { type: "text" });
    input.placeholder = "Paste DOI here (e.g. 10.1038/s41586-020-2649-2)";
    input.style.width = "100%";
    input.style.marginBottom = "8px";
    const btn = contentEl.createEl("button", { text: "Search" });
    btn.onclick = async () => {
      const raw = input.value.trim();
      const doiMatch = raw.match(/(10\.\d{4,9}\/[-._;()\/:A-Z0-9]+)/i);
      if (!doiMatch) {
        new import_obsidian.Notice("Invalid DOI or DOI URL");
        return;
      }
      const doi = doiMatch[1];
      await this.onSearch(doi);
      this.close();
    };
    input.addEventListener("keydown", async (e) => {
      if (e.key === "Enter") {
        btn.click();
      }
    });
    setTimeout(() => input.focus(), 50);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var LiteraturePlugin = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.addRibbonIcon("microscope", "Import literature by DOI", () => {
      new DoiModal(this.app, async (doi) => {
        await this.handleDOI(doi);
      }).open();
    });
    this.addRibbonIcon("brain", "Generate literature overview page", () => {
      this.generateOverviewPage();
    });
    this.addSettingTab(new LiteratureSettingTab(this.app, this));
  }
  onunload() {
  }
  async generateOverviewPage() {
    if (this.settings.literatureOverviewPagePath) {
      const overviewPath = (0, import_obsidian.normalizePath)(this.settings.literatureOverviewPagePath);
      if (!this.app.vault.getAbstractFileByPath(overviewPath)) {
        const overviewContent = [
          `---
`,
          `type: ZoteroidOverview`,
          `---


`,
          `### Filter by keywords


`,
          `\`\`\`dataview`,
          `table Journal, Title, Year, Keyword`,
          `from "${this.settings.literatureRoot}"`,
          `where type = "ZoteroidRecord" and (contains(Keyword, "#keyword1") or contains(Keyword, "#keyword2"))`,
          `sort Year DESC`,
          `\`\`\``,
          `


To correctly display this page, you need to install Dataview plug-in, and edit the code according to its grammar.
`
        ];
        await this.app.vault.create(
          overviewPath,
          overviewContent.join("\n")
        ).catch(() => {
        });
        new import_obsidian.Notice("Created literature overview page");
      }
    }
  }
  async handleDOI(rawDoi) {
    const doi = rawDoi.trim();
    const url = `https://api.crossref.org/works/${encodeURIComponent(doi)}`;
    let resp;
    try {
      resp = await fetch(url, { method: "GET" });
    } catch (e) {
      console.error("Network error when checking DOI", e);
      new import_obsidian.Notice("Network error when checking DOI");
      return;
    }
    if (!resp.ok) {
      new import_obsidian.Notice("DOI does not exist");
      return;
    }
    let data;
    try {
      data = await resp.json();
    } catch (e) {
      console.error("Error parsing Crossref JSON", e);
      new import_obsidian.Notice("Error reading DOI metadata");
      return;
    }
    const message = data.message;
    if (!message) {
      new import_obsidian.Notice("DOI does not exist");
      return;
    }
    const pubType = message.type || "";
    const year = extractYearFromCrossref(message);
    const title = Array.isArray(message.title) && message.title[0] ? message.title[0] : message.title || "Untitled";
    let journal = "";
    if (Array.isArray(message["container-title"]) && message["container-title"][0]) {
      journal = message["container-title"][0];
    }
    let filenameBase = "";
    if (pubType.includes("journal")) {
      filenameBase = `${journal} - ${year} - ${title}`;
    } else if (pubType.includes("book")) {
      filenameBase = `BOOK - ${year} - ${title}`;
    } else {
      filenameBase = `${journal || "UNKNOWN"} - ${year} - ${title}`;
    }
    const filenameBaseTrim = filenameBase.substring(0, 100).trim();
    const doiFolderName = sanitizeForPath(filenameBaseTrim);
    const root = this.settings.literatureRoot || DEFAULT_SETTINGS.literatureRoot;
    const folderPath = root.endsWith("/") ? `${root}${doiFolderName}` : `${root}/${doiFolderName}`;
    const existingFolder = this.app.vault.getAbstractFileByPath(folderPath);
    if (!existingFolder) {
      try {
        await this.app.vault.createFolder(folderPath);
      } catch (e) {
        console.error("Error creating folder", e);
        new import_obsidian.Notice("Failed to create folder. Check that literature root exists and is writable.");
        return;
      }
    }
    const fileNameSafe = sanitizeForPath(filenameBaseTrim) + ".md";
    const filePath = `${folderPath}/${fileNameSafe}`;
    const existingFile = this.app.vault.getAbstractFileByPath(filePath);
    if (existingFile) {
      new import_obsidian.Notice("Record already exists, if you want to re-create it, please delete the old one and try again.");
      if (existingFile instanceof import_obsidian.TFile) {
        this.app.workspace.getLeaf(false).openFile(existingFile);
      }
      return;
    }
    const dateAdded = new Date().toISOString().split("T")[0];
    const abstractRaw = message.abstract ? stripHtmlTags(message.abstract) : "";
    const doiUrl = `https://doi.org/${doi}`;
    const rawAuthors = data.message.author || [];
    const authorNames = rawAuthors.map((author) => {
      var _a, _b;
      if (!author)
        return "";
      if (author.literal)
        return author.literal;
      const given = (_a = author.given) != null ? _a : "";
      const family = (_b = author.family) != null ? _b : "";
      return `${given}${given && family ? " " : ""}${family}`.trim();
    }).filter(Boolean).join("; ");
    const contentLines = [
      /*
      `### Title\n\n${title}\n`,
      `### DOI\n\n${doiUrl}\n`,
      `### Journal\n\n${journal || ''}\n`,
      `### Year\n\n${year}\n`,
      `### Abstract\n\n${abstractRaw}\n`,
      `### Keywords\n\n\n`,
      `### Research group\n\n\n`,
      `### Main idea\n\n\n`,
      `### Materials and methods\n\n\n`,
      `### Comment\n\n\n`
      */
      `---
`,
      `type: ZoteroidRecord`,
      `date: ${dateAdded}`,
      `---


`,
      `### Title
(Title:: ${title})
`,
      `### Journal
(Journal:: ${journal || ""})
`,
      `### Year
(Year:: ${year})
`,
      `### DOI
(DOI:: ${doiUrl})
`,
      `### Group
(Group:: #group1)
`,
      `### Keyword
(Keyword:: #keyword1)
(Keyword:: #keyword2)
`,
      `### Authors
${authorNames}`,
      `### Abstract
${abstractRaw}
`,
      `### Main idea


`,
      `### Materials and methods


`,
      `### Comment


`
    ];
    const fileContent = contentLines.join("\n");
    try {
      const created = await this.app.vault.create(filePath, fileContent);
      new import_obsidian.Notice("Record successfully created");
      this.app.workspace.getLeaf(false).openFile(created);
    } catch (e) {
      console.error("Error creating file", e);
      new import_obsidian.Notice("Failed to create file.");
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var LiteratureSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Literature Manager Settings" });
    new import_obsidian.Setting(containerEl).setName("Literature root directory").setDesc("Path inside your vault where literature folders will be created (e.g. Literature or assets/literature). Folder will be created if not present.").addText((text) => text.setPlaceholder("Literature").setValue(this.plugin.settings.literatureRoot).onChange(async (value) => {
      this.plugin.settings.literatureRoot = value.trim();
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Literature overview page").setDesc("Full path and file name for the overview page").addText((text) => text.setPlaceholder("Example: Literature/Overview.md").setValue(this.plugin.settings.literatureOverviewPagePath).onChange(async (value) => {
      this.plugin.settings.literatureOverviewPagePath = value.trim();
      await this.plugin.saveSettings();
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIFRGaWxlLCBub3JtYWxpemVQYXRoICB9IGZyb20gJ29ic2lkaWFuJztcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICBTZXR0aW5ncyBpbnRlcmZhY2UgJiBkZWZhdWx0XG4gICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbmludGVyZmFjZSBMaXRlcmF0dXJlU2V0dGluZ3Mge1xuICBsaXRlcmF0dXJlUm9vdDogc3RyaW5nOyAvLyBwYXRoIHJlbGF0aXZlIHRvIHZhdWx0IHJvb3QsIGUuZy4gXCJMaXRlcmF0dXJlXCJcbiAgbGl0ZXJhdHVyZU92ZXJ2aWV3UGFnZVBhdGg6IHN0cmluZzsgLy8gZnVsbCBwYXRoIGluY2x1ZGluZyBmaWxlIG5hbWVcbn1cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IExpdGVyYXR1cmVTZXR0aW5ncyA9IHtcbiAgbGl0ZXJhdHVyZVJvb3Q6ICdMaXRlcmF0dXJlJyxcbiAgbGl0ZXJhdHVyZU92ZXJ2aWV3UGFnZVBhdGg6ICdMaXRlcmF0dXJlIE92ZXJ2aWV3Lm1kJ1xufTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICBIZWxwZXIgdXRpbHNcbiAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuZnVuY3Rpb24gc2FuaXRpemVGb3JQYXRoKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIC8vIFJlcGxhY2UgZm9yd2FyZCBzbGFzaCBhbmQgb3RoZXIgaWxsZWdhbCBmaWxlIG5hbWUgY2hhcnMgd2l0aCB1bmRlcnNjb3JlXG4gIC8vIGlsbGVnYWwgY2hhcnMgZm9yIG1vc3QgZmlsZXN5c3RlbXM6IDw+OlwiL1xcXFx8PyogYW5kIGNvbnRyb2wgY2hhcnNcbiAgcmV0dXJuIG5hbWUucmVwbGFjZSgvWzw+OlwiXFwvXFxcXHw/KlxceDAwLVxceDFGXS9nLCAnXycpLnRyaW0oKTtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdFllYXJGcm9tQ3Jvc3NyZWYobWVzc2FnZTogYW55KTogc3RyaW5nIHtcbiAgLy8gQ3Jvc3NyZWYgdXN1YWxseSB1c2VzIGlzc3VlZC5kYXRlLXBhcnRzOiBbW1lZWVksTU0sRERdLCAuLi5dXG4gIHRyeSB7XG4gICAgY29uc3QgcGFydHMgPSBtZXNzYWdlLmlzc3VlZD8uWydkYXRlLXBhcnRzJ10/LlswXTtcbiAgICBpZiAocGFydHMgJiYgcGFydHMubGVuZ3RoID4gMCkgcmV0dXJuIFN0cmluZyhwYXJ0c1swXSk7XG4gIH0gY2F0Y2ggKGUpIHt9XG4gIC8vIGZhbGxiYWNrOiBwdWJsaXNoZWQtcHJpbnQgb3IgcHVibGlzaGVkLW9ubGluZVxuICB0cnkge1xuICAgIGNvbnN0IHBhcnRzID0gbWVzc2FnZVsncHVibGlzaGVkLXByaW50J10/LlsnZGF0ZS1wYXJ0cyddPy5bMF0gfHxcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2VbJ3B1Ymxpc2hlZC1vbmxpbmUnXT8uWydkYXRlLXBhcnRzJ10/LlswXTtcbiAgICBpZiAocGFydHMgJiYgcGFydHMubGVuZ3RoID4gMCkgcmV0dXJuIFN0cmluZyhwYXJ0c1swXSk7XG4gIH0gY2F0Y2ggKGUpIHt9XG4gIHJldHVybiAnVW5rbm93blllYXInO1xufVxuXG5mdW5jdGlvbiBzdHJpcEh0bWxUYWdzKGh0bWw/OiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAoIWh0bWwpIHJldHVybiAnJztcbiAgcmV0dXJuIGh0bWwucmVwbGFjZSgvPFtePl0qPi9nLCAnJykudHJpbSgpO1xufVxuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgIE1vZGFsOiBzaW1wbGUgaW5wdXQgKyBidXR0b25cbiAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuY2xhc3MgRG9pTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgb25TZWFyY2g6IChkb2k6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG9uU2VhcmNoOiAoZG9pOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD4pIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMub25TZWFyY2ggPSBvblNlYXJjaDtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnSW1wb3J0IGxpdGVyYXR1cmUgYnkgRE9JJyB9KTtcblxuICAgIGNvbnN0IGlucHV0ID0gY29udGVudEVsLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ3RleHQnIH0pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgaW5wdXQucGxhY2Vob2xkZXIgPSAnUGFzdGUgRE9JIGhlcmUgKGUuZy4gMTAuMTAzOC9zNDE1ODYtMDIwLTI2NDktMiknO1xuICAgIGlucHV0LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIGlucHV0LnN0eWxlLm1hcmdpbkJvdHRvbSA9ICc4cHgnO1xuXG4gICAgY29uc3QgYnRuID0gY29udGVudEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdTZWFyY2gnIH0pIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgIGJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmF3ID0gaW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgY29uc3QgZG9pTWF0Y2ggPSByYXcubWF0Y2goLygxMFxcLlxcZHs0LDl9XFwvWy0uXzsoKVxcLzpBLVowLTldKykvaSk7XG4gICAgICBpZiAoIWRvaU1hdGNoKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ0ludmFsaWQgRE9JIG9yIERPSSBVUkwnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgZG9pID0gZG9pTWF0Y2hbMV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHVyZSBET0kgZm9ybWF0XG4gICAgICBcblxuICAgICAgLy8gY2FsbCBoYW5kbGVyXG4gICAgICBhd2FpdCB0aGlzLm9uU2VhcmNoKGRvaSk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfTtcblxuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBhc3luYyAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgIGJ0bi5jbGljaygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gYXV0b2ZvY3VzXG4gICAgc2V0VGltZW91dCgoKSA9PiBpbnB1dC5mb2N1cygpLCA1MCk7XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgUGx1Z2luIGNsYXNzXG4gICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExpdGVyYXR1cmVQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBzZXR0aW5nczogTGl0ZXJhdHVyZVNldHRpbmdzO1xuXG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG4gICAgLy8gYWRkIHJpYmJvbiBpY29uXG4gICAgdGhpcy5hZGRSaWJib25JY29uKCdtaWNyb3Njb3BlJywgJ0ltcG9ydCBsaXRlcmF0dXJlIGJ5IERPSScsICgpID0+IHtcbiAgICAgIG5ldyBEb2lNb2RhbCh0aGlzLmFwcCwgYXN5bmMgKGRvaSkgPT4ge1xuICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZURPSShkb2kpO1xuICAgICAgfSkub3BlbigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRSaWJib25JY29uKCdicmFpbicsICdHZW5lcmF0ZSBsaXRlcmF0dXJlIG92ZXJ2aWV3IHBhZ2UnLCAoKSA9PiB7XG4gICAgICB0aGlzLmdlbmVyYXRlT3ZlcnZpZXdQYWdlKCk7XG4gICAgfSk7XG5cbiAgICAvLyB0ZXN0LCB3aWxsIGJlIGRlbGV0ZWRcbiAgICAvLyB0aGlzLmFkZFJpYmJvbkljb24oJ2RpY2UnLCAnU2F5IGhlbGxvJywgKCkgPT4ge1xuICAgIC8vICAgbmV3IE5vdGljZSgnSGVsbG8gZnJvbSB0aGUgcmliYm9uIGJ5IFNZIScpO1xuICAgIC8vIH0pO1xuICAgIC8vIGVuZCBvZiB0ZXN0XG5cbiAgICAvLyBhZGQgc2V0dGluZ3MgdGFiXG4gICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBMaXRlcmF0dXJlU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuICB9XG5cbiAgb251bmxvYWQoKSB7XG4gICAgLy8gbm90aGluZyBzcGVjaWFsXG4gIH1cblxuICBhc3luYyBnZW5lcmF0ZU92ZXJ2aWV3UGFnZSgpXG4gIHtcbiAgICAvLyBDaGVjay9jcmVhdGUgb3ZlcnZpZXcgcGFnZVxuICAgIGlmICh0aGlzLnNldHRpbmdzLmxpdGVyYXR1cmVPdmVydmlld1BhZ2VQYXRoKSB7XG5cdFx0XHRcdGNvbnN0IG92ZXJ2aWV3UGF0aCA9IG5vcm1hbGl6ZVBhdGgodGhpcy5zZXR0aW5ncy5saXRlcmF0dXJlT3ZlcnZpZXdQYWdlUGF0aCk7XG5cdFx0XHRcdGlmICghdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG92ZXJ2aWV3UGF0aCkpIHtcbiAgICAgICAgICBjb25zdCBvdmVydmlld0NvbnRlbnQgPSBbXG4gICAgICAgICAgICBgLS0tXFxuYCxcbiAgICAgICAgICAgIGB0eXBlOiBab3Rlcm9pZE92ZXJ2aWV3YCxcbiAgICAgICAgICAgIGAtLS1cXG5cXG5cXG5gLFxuICAgICAgICAgICAgYCMjIyBGaWx0ZXIgYnkga2V5d29yZHNcXG5cXG5cXG5gLFxuICAgICAgICAgICAgYFxcYFxcYFxcYGRhdGF2aWV3YCxcbiAgICAgICAgICAgIGB0YWJsZSBKb3VybmFsLCBUaXRsZSwgWWVhciwgS2V5d29yZGAsXG4gICAgICAgICAgICBgZnJvbSBcXFwiJHt0aGlzLnNldHRpbmdzLmxpdGVyYXR1cmVSb290fVxcXCJgLFxuICAgICAgICAgICAgYHdoZXJlIHR5cGUgPSBcXFwiWm90ZXJvaWRSZWNvcmRcXFwiIGFuZCAoY29udGFpbnMoS2V5d29yZCwgXFxcIiNrZXl3b3JkMVxcXCIpIG9yIGNvbnRhaW5zKEtleXdvcmQsIFxcXCIja2V5d29yZDJcXFwiKSlgLFxuICAgICAgICAgICAgYHNvcnQgWWVhciBERVNDYCxcbiAgICAgICAgICAgIGBcXGBcXGBcXGBgLCAgXG4gICAgICAgICAgICBgXFxuXFxuXFxuVG8gY29ycmVjdGx5IGRpc3BsYXkgdGhpcyBwYWdlLCB5b3UgbmVlZCB0byBpbnN0YWxsIERhdGF2aWV3IHBsdWctaW4sIGFuZCBlZGl0IHRoZSBjb2RlIGFjY29yZGluZyB0byBpdHMgZ3JhbW1hci5cXG5gLCAgICAgICAgIFxuICAgICAgICAgIF07XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKFxuXHRcdFx0XHRcdFx0b3ZlcnZpZXdQYXRoLFxuXHRcdFx0XHRcdFx0b3ZlcnZpZXdDb250ZW50LmpvaW4oJ1xcbicpXG5cdFx0XHRcdFx0KS5jYXRjaCgoKSA9PiB7fSk7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShcIkNyZWF0ZWQgbGl0ZXJhdHVyZSBvdmVydmlldyBwYWdlXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG4gIH1cbiAgYXN5bmMgaGFuZGxlRE9JKHJhd0RvaTogc3RyaW5nKSB7XG4gICAgXG4gICAgY29uc3QgZG9pID0gcmF3RG9pLnRyaW0oKTtcbiAgICAvLyBDcm9zc3JlZiBBUEk6IEdFVCBodHRwczovL2FwaS5jcm9zc3JlZi5vcmcvd29ya3Mve2RvaX1cbiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkuY3Jvc3NyZWYub3JnL3dvcmtzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KGRvaSl9YDtcblxuICAgIGxldCByZXNwO1xuICAgIHRyeSB7XG4gICAgICByZXNwID0gYXdhaXQgZmV0Y2godXJsLCB7IG1ldGhvZDogJ0dFVCcgfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcignTmV0d29yayBlcnJvciB3aGVuIGNoZWNraW5nIERPSScsIGUpO1xuICAgICAgbmV3IE5vdGljZSgnTmV0d29yayBlcnJvciB3aGVuIGNoZWNraW5nIERPSScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghcmVzcC5vaykge1xuICAgICAgLy8gRE9JIGRvZXNuJ3QgcmVzb2x2ZSBvciBvdGhlciBlcnJvclxuICAgICAgbmV3IE5vdGljZSgnRE9JIGRvZXMgbm90IGV4aXN0Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGRhdGE6IGFueTtcbiAgICB0cnkge1xuICAgICAgZGF0YSA9IGF3YWl0IHJlc3AuanNvbigpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgQ3Jvc3NyZWYgSlNPTicsIGUpO1xuICAgICAgbmV3IE5vdGljZSgnRXJyb3IgcmVhZGluZyBET0kgbWV0YWRhdGEnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtZXNzYWdlID0gZGF0YS5tZXNzYWdlO1xuICAgIGlmICghbWVzc2FnZSkge1xuICAgICAgbmV3IE5vdGljZSgnRE9JIGRvZXMgbm90IGV4aXN0Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcHViVHlwZSA9IG1lc3NhZ2UudHlwZSB8fCAnJztcbiAgICBjb25zdCB5ZWFyID0gZXh0cmFjdFllYXJGcm9tQ3Jvc3NyZWYobWVzc2FnZSk7XG4gICAgY29uc3QgdGl0bGUgPSAoQXJyYXkuaXNBcnJheShtZXNzYWdlLnRpdGxlKSAmJiBtZXNzYWdlLnRpdGxlWzBdKSA/IG1lc3NhZ2UudGl0bGVbMF0gOiAobWVzc2FnZS50aXRsZSB8fCAnVW50aXRsZWQnKTtcbiAgICBsZXQgam91cm5hbCA9ICcnO1xuICAgIGlmIChBcnJheS5pc0FycmF5KG1lc3NhZ2VbJ2NvbnRhaW5lci10aXRsZSddKSAmJiBtZXNzYWdlWydjb250YWluZXItdGl0bGUnXVswXSkge1xuICAgICAgam91cm5hbCA9IG1lc3NhZ2VbJ2NvbnRhaW5lci10aXRsZSddWzBdO1xuICAgIH1cbiAgICBsZXQgZmlsZW5hbWVCYXNlID0gJyc7XG4gICAgaWYgKHB1YlR5cGUuaW5jbHVkZXMoJ2pvdXJuYWwnKSkge1xuICAgICAgZmlsZW5hbWVCYXNlID0gYCR7am91cm5hbH0gLSAke3llYXJ9IC0gJHt0aXRsZX1gO1xuICAgIH0gZWxzZSBpZiAocHViVHlwZS5pbmNsdWRlcygnYm9vaycpKSB7XG4gICAgICBmaWxlbmFtZUJhc2UgPSBgQk9PSyAtICR7eWVhcn0gLSAke3RpdGxlfWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGZhbGxiYWNrOiB0cmVhdCBhcyBhcnRpY2xlXG4gICAgICBmaWxlbmFtZUJhc2UgPSBgJHtqb3VybmFsIHx8ICdVTktOT1dOJ30gLSAke3llYXJ9IC0gJHt0aXRsZX1gO1xuICAgIH1cbiAgICBjb25zdCBmaWxlbmFtZUJhc2VUcmltID0gZmlsZW5hbWVCYXNlLnN1YnN0cmluZygwLDEwMCkudHJpbSgpO1xuXG4gICAgLy8gRGV0ZXJtaW5lIERPSSBmb2xkZXIgbmFtZSAocmVwbGFjZSBzbGFzaGVzKVxuICAgIC8vIGNvbnN0IGRvaUZvbGRlck5hbWUgPSBzYW5pdGl6ZUZvclBhdGgoZG9pLnJlcGxhY2UoL1xcLy9nLCAnXycpKTtcbiAgICAvLyBjb25zdCBkb2lGb2xkZXJOYW1lUmF3ID0gYCR7am91cm5hbCB8fCAnVU5LTk9XTid9IC0gJHt5ZWFyfSAtICR7dGl0bGV9YDtcbiAgICAvLyBjb25zdCBkb2lGb2xkZXJOYW1lID0gc2FuaXRpemVGb3JQYXRoKGRvaUZvbGRlck5hbWVSYXcucmVwbGFjZSgvXFwvL2csICdfJykpO1xuICAgIGNvbnN0IGRvaUZvbGRlck5hbWUgPSBzYW5pdGl6ZUZvclBhdGgoZmlsZW5hbWVCYXNlVHJpbSk7XG4gICAgLy8gUm9vdCBkaXIgKHVzZXIgcHJvdmlkZWQpXG4gICAgY29uc3Qgcm9vdCA9IHRoaXMuc2V0dGluZ3MubGl0ZXJhdHVyZVJvb3QgfHwgREVGQVVMVF9TRVRUSU5HUy5saXRlcmF0dXJlUm9vdDtcbiAgICAvLyBDb21wb3NlIGZvbGRlciBwYXRoIHJlbGF0aXZlIHRvIHZhdWx0IHJvb3RcbiAgICBjb25zdCBmb2xkZXJQYXRoID0gcm9vdC5lbmRzV2l0aCgnLycpID8gYCR7cm9vdH0ke2RvaUZvbGRlck5hbWV9YCA6IGAke3Jvb3R9LyR7ZG9pRm9sZGVyTmFtZX1gO1xuXG4gICAgLy8gQ2hlY2svY3JlYXRlIGZvbGRlclxuICAgIGNvbnN0IGV4aXN0aW5nRm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlclBhdGgpO1xuICAgIGlmICghZXhpc3RpbmdGb2xkZXIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXJQYXRoKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZm9sZGVyJywgZSk7XG4gICAgICAgIG5ldyBOb3RpY2UoJ0ZhaWxlZCB0byBjcmVhdGUgZm9sZGVyLiBDaGVjayB0aGF0IGxpdGVyYXR1cmUgcm9vdCBleGlzdHMgYW5kIGlzIHdyaXRhYmxlLicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ29tcG9zZSBmaWxlIG5hbWVcbiAgICBjb25zdCBmaWxlTmFtZVNhZmUgPSBzYW5pdGl6ZUZvclBhdGgoZmlsZW5hbWVCYXNlVHJpbSkgKyAnLm1kJztcbiAgICBjb25zdCBmaWxlUGF0aCA9IGAke2ZvbGRlclBhdGh9LyR7ZmlsZU5hbWVTYWZlfWA7XG5cbiAgICAvLyBDaGVjayBpZiBmaWxlIGV4aXN0c1xuICAgIGNvbnN0IGV4aXN0aW5nRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG4gICAgaWYgKGV4aXN0aW5nRmlsZSkge1xuICAgICAgbmV3IE5vdGljZSgnUmVjb3JkIGFscmVhZHkgZXhpc3RzLCBpZiB5b3Ugd2FudCB0byByZS1jcmVhdGUgaXQsIHBsZWFzZSBkZWxldGUgdGhlIG9sZCBvbmUgYW5kIHRyeSBhZ2Fpbi4nKTtcbiAgICAgIC8vIG9wZW4gaXRcbiAgICAgIGlmIChleGlzdGluZ0ZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSkub3BlbkZpbGUoZXhpc3RpbmdGaWxlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBCdWlsZCBmaWxlIGNvbnRlbnQgKHRoaXJkLWxldmVsIGhlYWRpbmdzKVxuICAgIGNvbnN0IGRhdGVBZGRlZCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOyBcbiAgICBjb25zdCBhYnN0cmFjdFJhdyA9IG1lc3NhZ2UuYWJzdHJhY3QgPyBzdHJpcEh0bWxUYWdzKG1lc3NhZ2UuYWJzdHJhY3QpIDogJyc7XG4gICAgY29uc3QgZG9pVXJsID0gYGh0dHBzOi8vZG9pLm9yZy8ke2RvaX1gOyAgICAgICAgICAvLyBVUkwgZm9ybWF0IGZvciBjb250ZW50XG5cbiAgICB0eXBlIENyb3NzcmVmQXV0aG9yID0ge1xuICAgICAgZ2l2ZW4/OiBzdHJpbmc7XG4gICAgICBmYW1pbHk/OiBzdHJpbmc7XG4gICAgICBsaXRlcmFsPzogc3RyaW5nO1xuICAgIH07XG4gICAgY29uc3QgcmF3QXV0aG9ycyA9IGRhdGEubWVzc2FnZS5hdXRob3IgfHwgW107XG4gICAgY29uc3QgYXV0aG9yTmFtZXMgPSByYXdBdXRob3JzLm1hcCgoYXV0aG9yOiBDcm9zc3JlZkF1dGhvcikgPT4ge1xuICAgICAgaWYgKCFhdXRob3IpIHJldHVybiAnJztcbiAgICAgIGlmIChhdXRob3IubGl0ZXJhbCkgcmV0dXJuIGF1dGhvci5saXRlcmFsO1xuICAgICAgY29uc3QgZ2l2ZW4gPSBhdXRob3IuZ2l2ZW4gPz8gJyc7XG4gICAgICBjb25zdCBmYW1pbHkgPSBhdXRob3IuZmFtaWx5ID8/ICcnO1xuICAgICAgcmV0dXJuIGAke2dpdmVufSR7Z2l2ZW4gJiYgZmFtaWx5ID8gJyAnIDogJyd9JHtmYW1pbHl9YC50cmltKCk7XG4gICAgfSkuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJzsgJyk7XG5cbiAgICBjb25zdCBjb250ZW50TGluZXMgPSBbXG4gICAgICAvKlxuICAgICAgYCMjIyBUaXRsZVxcblxcbiR7dGl0bGV9XFxuYCxcbiAgICAgIGAjIyMgRE9JXFxuXFxuJHtkb2lVcmx9XFxuYCxcbiAgICAgIGAjIyMgSm91cm5hbFxcblxcbiR7am91cm5hbCB8fCAnJ31cXG5gLFxuICAgICAgYCMjIyBZZWFyXFxuXFxuJHt5ZWFyfVxcbmAsXG4gICAgICBgIyMjIEFic3RyYWN0XFxuXFxuJHthYnN0cmFjdFJhd31cXG5gLFxuICAgICAgYCMjIyBLZXl3b3Jkc1xcblxcblxcbmAsXG4gICAgICBgIyMjIFJlc2VhcmNoIGdyb3VwXFxuXFxuXFxuYCxcbiAgICAgIGAjIyMgTWFpbiBpZGVhXFxuXFxuXFxuYCxcbiAgICAgIGAjIyMgTWF0ZXJpYWxzIGFuZCBtZXRob2RzXFxuXFxuXFxuYCxcbiAgICAgIGAjIyMgQ29tbWVudFxcblxcblxcbmBcbiAgICAgICovXG4gICAgICBgLS0tXFxuYCxcbiAgICAgIGB0eXBlOiBab3Rlcm9pZFJlY29yZGAsXG4gICAgICBgZGF0ZTogJHtkYXRlQWRkZWR9YCxcbiAgICAgIGAtLS1cXG5cXG5cXG5gLFxuICAgICAgYCMjIyBUaXRsZVxcbihUaXRsZTo6ICR7dGl0bGV9KVxcbmAsXG4gICAgICBgIyMjIEpvdXJuYWxcXG4oSm91cm5hbDo6ICR7am91cm5hbCB8fCAnJ30pXFxuYCxcbiAgICAgIGAjIyMgWWVhclxcbihZZWFyOjogJHt5ZWFyfSlcXG5gLFxuICAgICAgYCMjIyBET0lcXG4oRE9JOjogJHtkb2lVcmx9KVxcbmAsXG4gICAgICBgIyMjIEdyb3VwXFxuKEdyb3VwOjogI2dyb3VwMSlcXG5gLFxuICAgICAgYCMjIyBLZXl3b3JkXFxuKEtleXdvcmQ6OiAja2V5d29yZDEpXFxuKEtleXdvcmQ6OiAja2V5d29yZDIpXFxuYCxcbiAgICAgIGAjIyMgQXV0aG9yc1xcbiR7YXV0aG9yTmFtZXN9YCxcbiAgICAgIGAjIyMgQWJzdHJhY3RcXG4ke2Fic3RyYWN0UmF3fVxcbmAsXG4gICAgICBgIyMjIE1haW4gaWRlYVxcblxcblxcbmAsXG4gICAgICBgIyMjIE1hdGVyaWFscyBhbmQgbWV0aG9kc1xcblxcblxcbmAsXG4gICAgICBgIyMjIENvbW1lbnRcXG5cXG5cXG5gXG4gICAgXTtcbiAgICBjb25zdCBmaWxlQ29udGVudCA9IGNvbnRlbnRMaW5lcy5qb2luKCdcXG4nKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVQYXRoLCBmaWxlQ29udGVudCk7XG4gICAgICBuZXcgTm90aWNlKCdSZWNvcmQgc3VjY2Vzc2Z1bGx5IGNyZWF0ZWQnKTtcbiAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKS5vcGVuRmlsZShjcmVhdGVkKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBmaWxlJywgZSk7XG4gICAgICBuZXcgTm90aWNlKCdGYWlsZWQgdG8gY3JlYXRlIGZpbGUuJyk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICB9XG5cbiAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gIH1cbn1cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICBTZXR0aW5ncyB0YWIgVUlcbiAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuY2xhc3MgTGl0ZXJhdHVyZVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgcGx1Z2luOiBMaXRlcmF0dXJlUGx1Z2luO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IExpdGVyYXR1cmVQbHVnaW4pIHtcbiAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBkaXNwbGF5KCk6IHZvaWQge1xuICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgY29udGFpbmVyRWwuZW1wdHkoKTtcblxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0xpdGVyYXR1cmUgTWFuYWdlciBTZXR0aW5ncycgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdMaXRlcmF0dXJlIHJvb3QgZGlyZWN0b3J5JylcbiAgICAgIC5zZXREZXNjKCdQYXRoIGluc2lkZSB5b3VyIHZhdWx0IHdoZXJlIGxpdGVyYXR1cmUgZm9sZGVycyB3aWxsIGJlIGNyZWF0ZWQgKGUuZy4gTGl0ZXJhdHVyZSBvciBhc3NldHMvbGl0ZXJhdHVyZSkuIEZvbGRlciB3aWxsIGJlIGNyZWF0ZWQgaWYgbm90IHByZXNlbnQuJylcbiAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0xpdGVyYXR1cmUnKVxuICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGl0ZXJhdHVyZVJvb3QpXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5saXRlcmF0dXJlUm9vdCA9IHZhbHVlLnRyaW0oKTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgfSkpO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnTGl0ZXJhdHVyZSBvdmVydmlldyBwYWdlJylcblx0XHRcdC5zZXREZXNjKCdGdWxsIHBhdGggYW5kIGZpbGUgbmFtZSBmb3IgdGhlIG92ZXJ2aWV3IHBhZ2UnKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignRXhhbXBsZTogTGl0ZXJhdHVyZS9PdmVydmlldy5tZCcpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5saXRlcmF0dXJlT3ZlcnZpZXdQYWdlUGF0aClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmxpdGVyYXR1cmVPdmVydmlld1BhZ2VQYXRoID0gdmFsdWUudHJpbSgpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSk7XG4gIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFBNkY7QUFTN0YsSUFBTSxtQkFBdUM7QUFBQSxFQUMzQyxnQkFBZ0I7QUFBQSxFQUNoQiw0QkFBNEI7QUFDOUI7QUFLQSxTQUFTLGdCQUFnQixNQUFzQjtBQUc3QyxTQUFPLEtBQUssUUFBUSwyQkFBMkIsR0FBRyxFQUFFLEtBQUs7QUFDM0Q7QUFFQSxTQUFTLHdCQUF3QixTQUFzQjtBQXZCdkQ7QUF5QkUsTUFBSTtBQUNGLFVBQU0sU0FBUSxtQkFBUSxXQUFSLG1CQUFpQixrQkFBakIsbUJBQWlDO0FBQy9DLFFBQUksU0FBUyxNQUFNLFNBQVM7QUFBRyxhQUFPLE9BQU8sTUFBTSxDQUFDLENBQUM7QUFBQSxFQUN2RCxTQUFTLEdBQVA7QUFBQSxFQUFXO0FBRWIsTUFBSTtBQUNGLFVBQU0sVUFBUSxtQkFBUSxpQkFBaUIsTUFBekIsbUJBQTZCLGtCQUE3QixtQkFBNkMsU0FDN0MsbUJBQVEsa0JBQWtCLE1BQTFCLG1CQUE4QixrQkFBOUIsbUJBQThDO0FBQzVELFFBQUksU0FBUyxNQUFNLFNBQVM7QUFBRyxhQUFPLE9BQU8sTUFBTSxDQUFDLENBQUM7QUFBQSxFQUN2RCxTQUFTLEdBQVA7QUFBQSxFQUFXO0FBQ2IsU0FBTztBQUNUO0FBRUEsU0FBUyxjQUFjLE1BQXVCO0FBQzVDLE1BQUksQ0FBQztBQUFNLFdBQU87QUFDbEIsU0FBTyxLQUFLLFFBQVEsWUFBWSxFQUFFLEVBQUUsS0FBSztBQUMzQztBQUtBLElBQU0sV0FBTixjQUF1QixzQkFBTTtBQUFBLEVBRTNCLFlBQVksS0FBVSxVQUEwQztBQUM5RCxVQUFNLEdBQUc7QUFDVCxTQUFLLFdBQVc7QUFBQSxFQUNsQjtBQUFBLEVBRUEsU0FBUztBQUNQLFVBQU0sRUFBRSxVQUFVLElBQUk7QUFDdEIsY0FBVSxTQUFTLE1BQU0sRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBRTdELFVBQU0sUUFBUSxVQUFVLFNBQVMsU0FBUyxFQUFFLE1BQU0sT0FBTyxDQUFDO0FBQzFELFVBQU0sY0FBYztBQUNwQixVQUFNLE1BQU0sUUFBUTtBQUNwQixVQUFNLE1BQU0sZUFBZTtBQUUzQixVQUFNLE1BQU0sVUFBVSxTQUFTLFVBQVUsRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUMzRCxRQUFJLFVBQVUsWUFBWTtBQUN4QixZQUFNLE1BQU0sTUFBTSxNQUFNLEtBQUs7QUFDN0IsWUFBTSxXQUFXLElBQUksTUFBTSxvQ0FBb0M7QUFDL0QsVUFBSSxDQUFDLFVBQVU7QUFDYixZQUFJLHVCQUFPLHdCQUF3QjtBQUNuQztBQUFBLE1BQ0Y7QUFDQSxZQUFNLE1BQU0sU0FBUyxDQUFDO0FBSXRCLFlBQU0sS0FBSyxTQUFTLEdBQUc7QUFDdkIsV0FBSyxNQUFNO0FBQUEsSUFDYjtBQUVBLFVBQU0saUJBQWlCLFdBQVcsT0FBTyxNQUFNO0FBQzdDLFVBQUksRUFBRSxRQUFRLFNBQVM7QUFDckIsWUFBSSxNQUFNO0FBQUEsTUFDWjtBQUFBLElBQ0YsQ0FBQztBQUdELGVBQVcsTUFBTSxNQUFNLE1BQU0sR0FBRyxFQUFFO0FBQUEsRUFDcEM7QUFBQSxFQUVBLFVBQVU7QUFDUixVQUFNLEVBQUUsVUFBVSxJQUFJO0FBQ3RCLGNBQVUsTUFBTTtBQUFBLEVBQ2xCO0FBQ0Y7QUFLQSxJQUFxQixtQkFBckIsY0FBOEMsdUJBQU87QUFBQSxFQUduRCxNQUFNLFNBQVM7QUFDYixVQUFNLEtBQUssYUFBYTtBQUd4QixTQUFLLGNBQWMsY0FBYyw0QkFBNEIsTUFBTTtBQUNqRSxVQUFJLFNBQVMsS0FBSyxLQUFLLE9BQU8sUUFBUTtBQUNwQyxjQUFNLEtBQUssVUFBVSxHQUFHO0FBQUEsTUFDMUIsQ0FBQyxFQUFFLEtBQUs7QUFBQSxJQUNWLENBQUM7QUFFRCxTQUFLLGNBQWMsU0FBUyxxQ0FBcUMsTUFBTTtBQUNyRSxXQUFLLHFCQUFxQjtBQUFBLElBQzVCLENBQUM7QUFTRCxTQUFLLGNBQWMsSUFBSSxxQkFBcUIsS0FBSyxLQUFLLElBQUksQ0FBQztBQUFBLEVBQzdEO0FBQUEsRUFFQSxXQUFXO0FBQUEsRUFFWDtBQUFBLEVBRUEsTUFBTSx1QkFDTjtBQUVFLFFBQUksS0FBSyxTQUFTLDRCQUE0QjtBQUM5QyxZQUFNLG1CQUFlLCtCQUFjLEtBQUssU0FBUywwQkFBMEI7QUFDM0UsVUFBSSxDQUFDLEtBQUssSUFBSSxNQUFNLHNCQUFzQixZQUFZLEdBQUc7QUFDbkQsY0FBTSxrQkFBa0I7QUFBQSxVQUN0QjtBQUFBO0FBQUEsVUFDQTtBQUFBLFVBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFDQTtBQUFBLFVBQ0E7QUFBQSxVQUNBLFNBQVUsS0FBSyxTQUFTO0FBQUEsVUFDeEI7QUFBQSxVQUNBO0FBQUEsVUFDQTtBQUFBLFVBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFFBQ0Y7QUFDTCxjQUFNLEtBQUssSUFBSSxNQUFNO0FBQUEsVUFDcEI7QUFBQSxVQUNBLGdCQUFnQixLQUFLLElBQUk7QUFBQSxRQUMxQixFQUFFLE1BQU0sTUFBTTtBQUFBLFFBQUMsQ0FBQztBQUNoQixZQUFJLHVCQUFPLGtDQUFrQztBQUFBLE1BQzlDO0FBQUEsSUFDRDtBQUFBLEVBQ0Q7QUFBQSxFQUNBLE1BQU0sVUFBVSxRQUFnQjtBQUU5QixVQUFNLE1BQU0sT0FBTyxLQUFLO0FBRXhCLFVBQU0sTUFBTSxrQ0FBa0MsbUJBQW1CLEdBQUc7QUFFcEUsUUFBSTtBQUNKLFFBQUk7QUFDRixhQUFPLE1BQU0sTUFBTSxLQUFLLEVBQUUsUUFBUSxNQUFNLENBQUM7QUFBQSxJQUMzQyxTQUFTLEdBQVA7QUFDQSxjQUFRLE1BQU0sbUNBQW1DLENBQUM7QUFDbEQsVUFBSSx1QkFBTyxpQ0FBaUM7QUFDNUM7QUFBQSxJQUNGO0FBRUEsUUFBSSxDQUFDLEtBQUssSUFBSTtBQUVaLFVBQUksdUJBQU8sb0JBQW9CO0FBQy9CO0FBQUEsSUFDRjtBQUVBLFFBQUk7QUFDSixRQUFJO0FBQ0YsYUFBTyxNQUFNLEtBQUssS0FBSztBQUFBLElBQ3pCLFNBQVMsR0FBUDtBQUNBLGNBQVEsTUFBTSwrQkFBK0IsQ0FBQztBQUM5QyxVQUFJLHVCQUFPLDRCQUE0QjtBQUN2QztBQUFBLElBQ0Y7QUFFQSxVQUFNLFVBQVUsS0FBSztBQUNyQixRQUFJLENBQUMsU0FBUztBQUNaLFVBQUksdUJBQU8sb0JBQW9CO0FBQy9CO0FBQUEsSUFDRjtBQUVBLFVBQU0sVUFBVSxRQUFRLFFBQVE7QUFDaEMsVUFBTSxPQUFPLHdCQUF3QixPQUFPO0FBQzVDLFVBQU0sUUFBUyxNQUFNLFFBQVEsUUFBUSxLQUFLLEtBQUssUUFBUSxNQUFNLENBQUMsSUFBSyxRQUFRLE1BQU0sQ0FBQyxJQUFLLFFBQVEsU0FBUztBQUN4RyxRQUFJLFVBQVU7QUFDZCxRQUFJLE1BQU0sUUFBUSxRQUFRLGlCQUFpQixDQUFDLEtBQUssUUFBUSxpQkFBaUIsRUFBRSxDQUFDLEdBQUc7QUFDOUUsZ0JBQVUsUUFBUSxpQkFBaUIsRUFBRSxDQUFDO0FBQUEsSUFDeEM7QUFDQSxRQUFJLGVBQWU7QUFDbkIsUUFBSSxRQUFRLFNBQVMsU0FBUyxHQUFHO0FBQy9CLHFCQUFlLEdBQUcsYUFBYSxVQUFVO0FBQUEsSUFDM0MsV0FBVyxRQUFRLFNBQVMsTUFBTSxHQUFHO0FBQ25DLHFCQUFlLFVBQVUsVUFBVTtBQUFBLElBQ3JDLE9BQU87QUFFTCxxQkFBZSxHQUFHLFdBQVcsZUFBZSxVQUFVO0FBQUEsSUFDeEQ7QUFDQSxVQUFNLG1CQUFtQixhQUFhLFVBQVUsR0FBRSxHQUFHLEVBQUUsS0FBSztBQU01RCxVQUFNLGdCQUFnQixnQkFBZ0IsZ0JBQWdCO0FBRXRELFVBQU0sT0FBTyxLQUFLLFNBQVMsa0JBQWtCLGlCQUFpQjtBQUU5RCxVQUFNLGFBQWEsS0FBSyxTQUFTLEdBQUcsSUFBSSxHQUFHLE9BQU8sa0JBQWtCLEdBQUcsUUFBUTtBQUcvRSxVQUFNLGlCQUFpQixLQUFLLElBQUksTUFBTSxzQkFBc0IsVUFBVTtBQUN0RSxRQUFJLENBQUMsZ0JBQWdCO0FBQ25CLFVBQUk7QUFDRixjQUFNLEtBQUssSUFBSSxNQUFNLGFBQWEsVUFBVTtBQUFBLE1BQzlDLFNBQVMsR0FBUDtBQUNBLGdCQUFRLE1BQU0seUJBQXlCLENBQUM7QUFDeEMsWUFBSSx1QkFBTyw2RUFBNkU7QUFDeEY7QUFBQSxNQUNGO0FBQUEsSUFDRjtBQUdBLFVBQU0sZUFBZSxnQkFBZ0IsZ0JBQWdCLElBQUk7QUFDekQsVUFBTSxXQUFXLEdBQUcsY0FBYztBQUdsQyxVQUFNLGVBQWUsS0FBSyxJQUFJLE1BQU0sc0JBQXNCLFFBQVE7QUFDbEUsUUFBSSxjQUFjO0FBQ2hCLFVBQUksdUJBQU8sOEZBQThGO0FBRXpHLFVBQUksd0JBQXdCLHVCQUFPO0FBQ2pDLGFBQUssSUFBSSxVQUFVLFFBQVEsS0FBSyxFQUFFLFNBQVMsWUFBWTtBQUFBLE1BQ3pEO0FBQ0E7QUFBQSxJQUNGO0FBR0EsVUFBTSxZQUFZLElBQUksS0FBSyxFQUFFLFlBQVksRUFBRSxNQUFNLEdBQUcsRUFBRSxDQUFDO0FBQ3ZELFVBQU0sY0FBYyxRQUFRLFdBQVcsY0FBYyxRQUFRLFFBQVEsSUFBSTtBQUN6RSxVQUFNLFNBQVMsbUJBQW1CO0FBT2xDLFVBQU0sYUFBYSxLQUFLLFFBQVEsVUFBVSxDQUFDO0FBQzNDLFVBQU0sY0FBYyxXQUFXLElBQUksQ0FBQyxXQUEyQjtBQWpRbkU7QUFrUU0sVUFBSSxDQUFDO0FBQVEsZUFBTztBQUNwQixVQUFJLE9BQU87QUFBUyxlQUFPLE9BQU87QUFDbEMsWUFBTSxTQUFRLFlBQU8sVUFBUCxZQUFnQjtBQUM5QixZQUFNLFVBQVMsWUFBTyxXQUFQLFlBQWlCO0FBQ2hDLGFBQU8sR0FBRyxRQUFRLFNBQVMsU0FBUyxNQUFNLEtBQUssU0FBUyxLQUFLO0FBQUEsSUFDL0QsQ0FBQyxFQUFFLE9BQU8sT0FBTyxFQUFFLEtBQUssSUFBSTtBQUU1QixVQUFNLGVBQWU7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxNQWFuQjtBQUFBO0FBQUEsTUFDQTtBQUFBLE1BQ0EsU0FBUztBQUFBLE1BQ1Q7QUFBQTtBQUFBO0FBQUE7QUFBQSxNQUNBO0FBQUEsV0FBdUI7QUFBQTtBQUFBLE1BQ3ZCO0FBQUEsYUFBMkIsV0FBVztBQUFBO0FBQUEsTUFDdEM7QUFBQSxVQUFxQjtBQUFBO0FBQUEsTUFDckI7QUFBQSxTQUFtQjtBQUFBO0FBQUEsTUFDbkI7QUFBQTtBQUFBO0FBQUEsTUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBLE1BQ0E7QUFBQSxFQUFnQjtBQUFBLE1BQ2hCO0FBQUEsRUFBaUI7QUFBQTtBQUFBLE1BQ2pCO0FBQUE7QUFBQTtBQUFBO0FBQUEsTUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBLE1BQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUNGO0FBQ0EsVUFBTSxjQUFjLGFBQWEsS0FBSyxJQUFJO0FBRTFDLFFBQUk7QUFDRixZQUFNLFVBQVUsTUFBTSxLQUFLLElBQUksTUFBTSxPQUFPLFVBQVUsV0FBVztBQUNqRSxVQUFJLHVCQUFPLDZCQUE2QjtBQUN4QyxXQUFLLElBQUksVUFBVSxRQUFRLEtBQUssRUFBRSxTQUFTLE9BQU87QUFBQSxJQUNwRCxTQUFTLEdBQVA7QUFDQSxjQUFRLE1BQU0sdUJBQXVCLENBQUM7QUFDdEMsVUFBSSx1QkFBTyx3QkFBd0I7QUFBQSxJQUNyQztBQUFBLEVBQ0Y7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNuQixTQUFLLFdBQVcsT0FBTyxPQUFPLENBQUMsR0FBRyxrQkFBa0IsTUFBTSxLQUFLLFNBQVMsQ0FBQztBQUFBLEVBQzNFO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDbkIsVUFBTSxLQUFLLFNBQVMsS0FBSyxRQUFRO0FBQUEsRUFDbkM7QUFDRjtBQUtBLElBQU0sdUJBQU4sY0FBbUMsaUNBQWlCO0FBQUEsRUFHbEQsWUFBWSxLQUFVLFFBQTBCO0FBQzlDLFVBQU0sS0FBSyxNQUFNO0FBQ2pCLFNBQUssU0FBUztBQUFBLEVBQ2hCO0FBQUEsRUFFQSxVQUFnQjtBQUNkLFVBQU0sRUFBRSxZQUFZLElBQUk7QUFDeEIsZ0JBQVksTUFBTTtBQUVsQixnQkFBWSxTQUFTLE1BQU0sRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBRWxFLFFBQUksd0JBQVEsV0FBVyxFQUNwQixRQUFRLDJCQUEyQixFQUNuQyxRQUFRLGdKQUFnSixFQUN4SixRQUFRLFVBQVEsS0FDZCxlQUFlLFlBQVksRUFDM0IsU0FBUyxLQUFLLE9BQU8sU0FBUyxjQUFjLEVBQzVDLFNBQVMsT0FBTyxVQUFVO0FBQ3pCLFdBQUssT0FBTyxTQUFTLGlCQUFpQixNQUFNLEtBQUs7QUFDakQsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLElBQ2pDLENBQUMsQ0FBQztBQUVOLFFBQUksd0JBQVEsV0FBVyxFQUN2QixRQUFRLDBCQUEwQixFQUNsQyxRQUFRLCtDQUErQyxFQUN2RCxRQUFRLFVBQVEsS0FDZixlQUFlLGlDQUFpQyxFQUNoRCxTQUFTLEtBQUssT0FBTyxTQUFTLDBCQUEwQixFQUN4RCxTQUFTLE9BQU8sVUFBVTtBQUMxQixXQUFLLE9BQU8sU0FBUyw2QkFBNkIsTUFBTSxLQUFLO0FBQzdELFlBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxJQUNoQyxDQUFDLENBQUM7QUFBQSxFQUNKO0FBQ0Y7IiwKICAibmFtZXMiOiBbXQp9Cg==
